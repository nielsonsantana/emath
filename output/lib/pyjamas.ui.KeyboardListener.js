$pyjs.loaded_modules["pyjamas.ui.KeyboardListener"]=function(c){if($pyjs.loaded_modules["pyjamas.ui.KeyboardListener"].__was_initialized__){return $pyjs.loaded_modules["pyjamas.ui.KeyboardListener"]}if(typeof $pyjs.loaded_modules["pyjamas.ui"]=="undefined"||!$pyjs.loaded_modules["pyjamas.ui"].__was_initialized__){pyjslib.___import___("pyjamas.ui",null)}pyjamas.ui["KeyboardListener"]=$pyjs.loaded_modules["pyjamas.ui.KeyboardListener"];pyjamas.ui["KeyboardListener"].__was_initialized__=true;if((c===null)||(typeof c=="undefined")){c="pyjamas.ui.KeyboardListener"}var a=pyjamas.ui["KeyboardListener"].__name__=c;var b=pyjamas.ui["KeyboardListener"];pyjamas.ui["KeyboardListener"]["DOM"]=pyjslib.___import___("pyjamas.DOM","pyjamas.ui",null,false);pyjamas.ui["KeyboardListener"]["Event"]=pyjslib.___import___("pyjamas.ui.Event","pyjamas.ui",null,false);pyjamas.ui["KeyboardListener"]["KEY_ALT"]=18;pyjamas.ui["KeyboardListener"]["KEY_BACKSPACE"]=8;pyjamas.ui["KeyboardListener"]["KEY_CTRL"]=17;pyjamas.ui["KeyboardListener"]["KEY_DELETE"]=46;pyjamas.ui["KeyboardListener"]["KEY_DOWN"]=40;pyjamas.ui["KeyboardListener"]["KEY_END"]=35;pyjamas.ui["KeyboardListener"]["KEY_ENTER"]=13;pyjamas.ui["KeyboardListener"]["KEY_ESCAPE"]=27;pyjamas.ui["KeyboardListener"]["KEY_HOME"]=36;pyjamas.ui["KeyboardListener"]["KEY_LEFT"]=37;pyjamas.ui["KeyboardListener"]["KEY_PAGEDOWN"]=34;pyjamas.ui["KeyboardListener"]["KEY_PAGEUP"]=33;pyjamas.ui["KeyboardListener"]["KEY_RIGHT"]=39;pyjamas.ui["KeyboardListener"]["KEY_SHIFT"]=16;pyjamas.ui["KeyboardListener"]["KEY_TAB"]=9;pyjamas.ui["KeyboardListener"]["KEY_UP"]=38;pyjamas.ui["KeyboardListener"]["MODIFIER_ALT"]=4;pyjamas.ui["KeyboardListener"]["MODIFIER_CTRL"]=2;pyjamas.ui["KeyboardListener"]["MODIFIER_SHIFT"]=1;pyjamas.ui["KeyboardListener"]["getKeyboardModifiers"]=function(e){var d,g,f;d=0;f=0;g=0;if(pyjslib.bool(pyjamas.ui["KeyboardListener"]["DOM"]["eventGetShiftKey"](e))){d=pyjamas.ui["KeyboardListener"]["MODIFIER_SHIFT"]}if(pyjslib.bool(pyjamas.ui["KeyboardListener"]["DOM"]["eventGetCtrlKey"](e))){f=pyjamas.ui["KeyboardListener"]["MODIFIER_CTRL"]}if(pyjslib.bool(pyjamas.ui["KeyboardListener"]["DOM"]["eventGetAltKey"](e))){g=pyjamas.ui["KeyboardListener"]["MODIFIER_ALT"]}return(d)|(f)|(g)};pyjamas.ui["KeyboardListener"]["getKeyboardModifiers"].__name__="getKeyboardModifiers";pyjamas.ui["KeyboardListener"]["getKeyboardModifiers"].__bind_type__=0;pyjamas.ui["KeyboardListener"]["getKeyboardModifiers"].__args__=[null,null,["event"]];pyjamas.ui["KeyboardListener"]["fireKeyboardEvent"]=function(q,g,u){var j,p,e,n,r,s,v,i,o,m,l,t,k,w,h,y,d,f,x;d=pyjamas.ui["KeyboardListener"]["getKeyboardModifiers"](u);h=pyjamas.ui["KeyboardListener"]["DOM"]["eventGetKeyCode"](u);i=pyjamas.ui["KeyboardListener"]["DOM"]["eventGetType"](u);if(pyjslib.bool(pyjslib.op_eq(i,String("keydown")))){p=q;if(typeof(o=p.__array)!="undefined"){y=0}else{p=p.__iter__();y=typeof(o=p.__array)!="undefined"?0:(typeof p.$genfunc=="function"?1:-1)}f=0;while(typeof(m=(y?(y>0?p.next(true,false):pyjslib.wrapped_next(p)):o[f++]))!="undefined"){l=m;l.onKeyDown(g,h,d)}}else{if(pyjslib.bool(pyjslib.op_eq(i,String("keyup")))){r=q;if(typeof(x=r.__array)!="undefined"){e=0}else{r=r.__iter__();e=typeof(x=r.__array)!="undefined"?0:(typeof r.$genfunc=="function"?1:-1)}t=0;while(typeof(k=(e?(e>0?r.next(true,false):pyjslib.wrapped_next(r)):x[t++]))!="undefined"){l=k;l.onKeyUp(g,h,d)}}else{if(pyjslib.bool(pyjslib.op_eq(i,String("keypress")))){v=q;if(typeof(w=v.__array)!="undefined"){j=0}else{v=v.__iter__();j=typeof(w=v.__array)!="undefined"?0:(typeof v.$genfunc=="function"?1:-1)}n=0;while(typeof(s=(j?(j>0?v.next(true,false):pyjslib.wrapped_next(v)):w[n++]))!="undefined"){l=s;l.onKeyPress(g,h,d)}}}}return null};pyjamas.ui["KeyboardListener"]["fireKeyboardEvent"].__name__="fireKeyboardEvent";pyjamas.ui["KeyboardListener"]["fireKeyboardEvent"].__bind_type__=0;pyjamas.ui["KeyboardListener"]["fireKeyboardEvent"].__args__=[null,null,["listeners"],["sender"],["event"]];pyjamas.ui["KeyboardListener"]["KEYBOARD_EVENTS"]=pyjslib.list([String("keydown"),String("keyup"),String("keypress")]);pyjamas.ui["KeyboardListener"]["KeyboardHandler"]=(function(){var f=$pyjs__class_instance("KeyboardHandler");var e=new Object();var d;e.__md5__="ea6caf4abeaf78f9cbaff7ddf9d0a15c";d=$pyjs__bind_method(f,"__init__",function(){if(this.__is_instance__===true){var h=this}else{var h=arguments[0]}var g,i;h._keyboardListeners=pyjslib.list([]);h.sinkEvents((((g=pyjamas.ui["KeyboardListener"]["Event"]["KEYEVENTS"])!==null&(i=pyjamas.ui["KeyboardListener"]["Event"]).__is_instance__)&&typeof g=="function"?pyjslib.getattr(i,"KEYEVENTS"):pyjamas.ui["KeyboardListener"]["Event"]["KEYEVENTS"]));return null},1,[null,null,["self"]]);e.__init__=d;d=$pyjs__bind_method(f,"onBrowserEvent",function(i){if(this.__is_instance__===true){var g=this}else{var g=arguments[0];i=arguments[1]}var k,h,j;h=pyjamas.ui["KeyboardListener"]["DOM"]["eventGetType"](i);if(pyjslib.bool(pyjslib.list([String("keydown"),String("keyup"),String("keypress")]).__contains__(h))){pyjamas.ui["KeyboardListener"]["fireKeyboardEvent"]((((k=g._keyboardListeners)!==null&(j=g).__is_instance__)&&typeof k=="function"?pyjslib.getattr(j,"_keyboardListeners"):g._keyboardListeners),g,i)}return null},1,[null,null,["self"],["event"]]);e.onBrowserEvent=d;d=$pyjs__bind_method(f,"addKeyboardListener",function(h){if(this.__is_instance__===true){var g=this}else{var g=arguments[0];h=arguments[1]}g._keyboardListeners["append"](h);return null},1,[null,null,["self"],["listener"]]);e.addKeyboardListener=d;d=$pyjs__bind_method(f,"removeKeyboardListener",function(h){if(this.__is_instance__===true){var g=this}else{var g=arguments[0];h=arguments[1]}g._keyboardListeners["remove"](h);return null},1,[null,null,["self"],["listener"]]);e.removeKeyboardListener=d;d=$pyjs__bind_method(f,"onKeyDown",function(j,g,i){if(this.__is_instance__===true){var h=this}else{var h=arguments[0];j=arguments[1];g=arguments[2];i=arguments[3]}return null},1,[null,null,["self"],["sender"],["keycode"],["modifiers"]]);e.onKeyDown=d;d=$pyjs__bind_method(f,"onKeyUp",function(j,g,i){if(this.__is_instance__===true){var h=this}else{var h=arguments[0];j=arguments[1];g=arguments[2];i=arguments[3]}return null},1,[null,null,["self"],["sender"],["keycode"],["modifiers"]]);e.onKeyUp=d;d=$pyjs__bind_method(f,"onKeyPress",function(j,g,i){if(this.__is_instance__===true){var h=this}else{var h=arguments[0];j=arguments[1];g=arguments[2];i=arguments[3]}return null},1,[null,null,["self"],["sender"],["keycode"],["modifiers"]]);e.onKeyPress=d;return $pyjs__class_function(f,e,new Array(pyjslib.object))})();return this};